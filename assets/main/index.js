System.register("chunks:///_virtual/AreaBackground.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,n,o;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.Component}],execute:function(){var c;e._RF.push({},"7be4d1RpVZKWbtWn1OGtTUY","AreaBackground",void 0);var u=n.ccclass;n.property,t("AreaBackground",u("AreaBackground")(c=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){this.node.active=!1},n.update=function(t){},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/BodyGroups.ts",["cc"],(function(e){"use strict";var u;return{setters:[function(e){u=e.cclegacy}],execute:function(){var r;e("BodyGroup",void 0),u._RF.push({},"edc291aePBNDoAusuf9ikKt","BodyGroups",void 0),function(e){e[e.SelectableTile=1]="SelectableTile",e[e.GroundTile=2]="GroundTile",e[e.GridTile=4]="GridTile",e[e.Cluster=8]="Cluster"}(r||(r=e("BodyGroup",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GroundTile.ts","./TileCluster.ts"],(function(o){"use strict";var n,i,l,t,e,r,s;return{setters:[function(o){n=o.inheritsLoose},function(o){i=o.cclegacy,l=o._decorator,t=o.Collider,e=o.Component},function(o){r=o.GroundTile},function(o){s=o.TileCluster}],execute:function(){var d;i._RF.push({},"61c1ed8j1xKfZQk7WCq/cKv","CollisionHandler",void 0);var c=l.ccclass;o("CollisionHandler",c("CollisionHandler")(d=function(o){function i(){for(var n,i=arguments.length,l=new Array(i),t=0;t<i;t++)l[t]=arguments[t];return(n=o.call.apply(o,[this].concat(l))||this).collidedGroundTile=null,n}n(i,o);var l=i.prototype;return l.onEnable=function(){var o=this.node.getComponent(t);o&&(o.on("onCollisionEnter",this.onCollisionEnter,this),o.on("onCollisionExit",this.onCollisionExit,this))},l.onDisable=function(){var o=this.getComponentInChildren(t);o&&(o.off("onCollisionEnter",this.onCollisionEnter,this),o.off("onCollisionExit",this.onCollisionExit,this))},l.onCollisionEnter=function(o){var n=o.otherCollider.node.getComponent(r);n&&(this.collidedGroundTile=n,this.node.getComponent(s).lastGroundTile=this.collidedGroundTile,this.collidedGroundTile.highlight(!0))},l.onCollisionExit=function(o){var n=o.otherCollider.node.getComponent(r);n&&this.collidedGroundTile===n&&(this.collidedGroundTile.highlight(!1),this.collidedGroundTile=null)},i}(e))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/ColorProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,n,t,i,l,c,a,u,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,c=e.director,a=e.Color,u=e.MeshRenderer,s=e.Component}],execute:function(){var p,f,h,d,b,g,y,v,C,w,m;i._RF.push({},"827d967CyVIx6bYlbYhkMwR","ColorProvider",void 0);var z=l.ccclass,P=l.property;e("ColorProvider",z("ColorProvider")(((m=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return r=e.call.apply(e,[this].concat(i))||this,n(r,"color1",h,t(r)),n(r,"color2",d,t(r)),n(r,"color3",b,t(r)),n(r,"color4",g,t(r)),n(r,"color5",y,t(r)),n(r,"color6",v,t(r)),n(r,"ground",C,t(r)),n(r,"highlight",w,t(r)),r}o(r,e);var i=r.prototype;return i.onLoad=function(){null===r._instance?(r._instance=this,c.addPersistRootNode(this.node)):(this.destroy(),console.warn("Only one instance of ColorProvider is allowed."))},r.getInstance=function(){return r._instance||console.error("ColorProvider instance is not yet initialized."),r._instance},i.getColor=function(e){switch(e){case 0:return this.color1.clone();case 1:return this.color2.clone();case 2:return this.color3.clone();case 3:return this.color4.clone();case 4:return this.color5.clone();case 5:return this.color6.clone();case 6:return this.ground.clone();case 7:return this.highlight.clone();default:return a.WHITE.clone()}},r.ChangeColor=function(e,r){var o=r.getComponent(u);if(o){var n=o.material;n?n.setProperty("albedo",e):console.error("Material not found on MeshRenderer.")}},r}(s))._instance=null,h=r((f=m).prototype,"color1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.RED.clone()}}),d=r(f.prototype,"color2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.GREEN.clone()}}),b=r(f.prototype,"color3",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.BLUE.clone()}}),g=r(f.prototype,"color4",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.YELLOW.clone()}}),y=r(f.prototype,"color5",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.CYAN.clone()}}),v=r(f.prototype,"color6",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),C=r(f.prototype,"ground",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),w=r(f.prototype,"highlight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.MAGENTA.clone()}}),p=f))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts","./NeighborChecker.ts","./TileSelectionHandler.ts","./TilePlacementHandler.ts","./TileTransferHandler.ts"],(function(e){"use strict";var n,r,t,a,i,l,o,c,s,u,f,d,h,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,s=e.Component},function(e){u=e.GridManager},function(e){f=e.NeighborChecker},function(e){d=e.TileSelectionHandler},function(e){h=e.TilePlacementHandler},function(e){p=e.TileTransferHandler}],execute:function(){var g,m,T,v,y,b,H;o._RF.push({},"b58ffCmt59Jj52WP/DfJFRl","GameManager",void 0);var P=c.ccclass,M=c.property;e("GameManager",(g=P("GameManager"),m=M(u),T=M(h),g((b=n((y=function(e){function n(){for(var n,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return n=e.call.apply(e,[this].concat(i))||this,t(n,"gridManager",b,a(n)),t(n,"tilePlacementHandler",H,a(n)),n.neighborChecker=void 0,n.tileTransferHandler=void 0,n}r(n,e);var o=n.prototype;return o.onLoad=function(){d.placementEvent.on("placement",this.onPlacementTriggered,this)},o.start=function(){this.neighborChecker=new f,this.tileTransferHandler=new p},o.onPlacementTriggered=function(){var e=i(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handlePlacement(n);case 2:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),o.handlePlacement=function(){var e=i(l().mark((function e(n){var r,t,a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(r=this.tilePlacementHandler)?void 0:r.place(n);case 2:e.sent&&(a=this.gridManager.getGrid(),(i=null==(t=this.neighborChecker)?void 0:t.findFirstMatch(a,n.lastGroundTile))?this.tileTransferHandler.transferClusterToTarget(i,n.lastGroundTile):console.log("No match found."));case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),o.onDestroy=function(){d.placementEvent.off("placement",this.onPlacementTriggered,this)},n}(s)).prototype,"gridManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(y.prototype,"tilePlacementHandler",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/GridGenerator.ts",["cc","./GroundTile.ts","./TileCluster.ts","./ColorProvider.ts"],(function(e){"use strict";var t,r,i,n,o,s,l;return{setters:[function(e){t=e.cclegacy,r=e._decorator,i=e.Vec3,n=e.instantiate},function(e){o=e.GroundTile},function(e){s=e.TileCluster},function(e){l=e.ColorProvider}],execute:function(){var u;t._RF.push({},"2e8acHRb/9JQoMu7JT2TGDj","GridGenerator",void 0);var a=r.ccclass;r.property,e("GridGenerator",a("GridGenerator")(u=function(){function e(e,t,r){this.groundTilePrefab=void 0,this.tileClusterPrefab=void 0,this.tileSize=void 0,this.groundTilePrefab=e,this.tileClusterPrefab=t,this.tileSize=r}var t=e.prototype;return t.generateGrid=function(e,t){for(var r=[],n=e.length,s=e[0].length,l=(s-1)*this.tileSize*.5,u=(n-1)*this.tileSize*.5,a=0;a<n;a++){r[a]=[];for(var c=0;c<s;c++){var d=e[a][c],f=new i(c*this.tileSize-l,0,-(a*this.tileSize-u)),h=this.createGroundTile(f,t),v=h.getComponent(o);v&&(v.gridPosition={row:a,col:c},r[a][c]=v,d>0&&this.createLevelCluster(d,h,v))}}return r},t.createGroundTile=function(e,t){var r=n(this.groundTilePrefab);return r.parent=t,r.setPosition(e),r},t.createLevelCluster=function(e,t,r){var o=n(this.tileClusterPrefab).getComponent(s);o&&(o.initCluster(e,2),o.node.setPosition(new i(t.position.x,.2,t.position.z)),o.node.setParent(t.parent),r.addTileCluster(o))},t.test=function(e){e[0][0]&&l.ChangeColor(l.getInstance().getColor(4),e[0][0].node)},e}())||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/GridManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridGenerator.ts"],(function(e){"use strict";var r,t,i,n,o,a,u,l,c,s,d,f;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){u=e.cclegacy,l=e._decorator,c=e.Prefab,s=e.Node,d=e.Component},function(e){f=e.GridGenerator}],execute:function(){var g,p,h,b,y,G,P,m,v,z;u._RF.push({},"fcfc7R8o51MhpTFydI/hHkU","GridManager",void 0);var w=l.ccclass,T=l.property;e("GridManager",(g=w("GridManager"),p=T({type:c}),h=T({type:c}),b=T(s),g((P=r((G=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o))||this,i(r,"groundTilePrefab",P,n(r)),i(r,"tileClusterPrefab",m,n(r)),i(r,"gridArea",v,n(r)),i(r,"tileSize",z,n(r)),r.grid=[],r.gridGenerator=null,r}t(r,e);var u=r.prototype;return u.onLoad=function(){this.gridGenerator=new f(this.groundTilePrefab,this.tileClusterPrefab,this.tileSize)},u.setGrid=function(e){this.grid=this.gridGenerator.generateGrid(e,this.gridArea)},u.getGrid=function(){return this.grid},u.getGroundTile=function(e,r){return this.grid[e]&&this.grid[e][r]?this.grid[e][r]:null},u.handlePlacementSuccess=function(){var e=o(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.checkChildTypes();case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u.resetGrid=function(){this.grid.forEach((function(e){e.forEach((function(e){e.node&&e.node.destroy()}))})),this.grid=[]},r}(d)).prototype,"groundTilePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(G.prototype,"tileClusterPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(G.prototype,"gridArea",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(G.prototype,"tileSize",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=G))||y));u._RF.pop()}}}));

System.register("chunks:///_virtual/GroundTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProvider.ts"],(function(t){"use strict";var e,o,n,r,l,i;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Collider,l=t.Component},function(t){i=t.ColorProvider}],execute:function(){var s;o._RF.push({},"961dfMp4KdCgb4pdQv1aabD","GroundTile",void 0);var u=n.ccclass;n.property,t("GroundTile",u("GroundTile")(s=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).gridPosition={row:0,col:0},e.attachedCluster=[],e.lastAttachedCluster=null,e.defaultColor=null,e.highlightColor=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){this.highlightColor=i.getInstance().getColor(7),this.defaultColor=i.getInstance().getColor(6),this.highlight(!1)},n.setActiveCollider=function(t){this.node.getComponent(r).enabled=t},n.addTileCluster=function(t){this.lastAttachedCluster=t,t.node.setParent(this.node.parent),this.attachedCluster.push(t),this.setActiveCollider(!1)},n.checkChildTypes=function(){var t=this;return new Promise((function(e){if(t.attachedCluster.length>1){var o=t.attachedCluster[t.attachedCluster.length-2];t.lastAttachedCluster.type===o.type||e()}else e()}))},n.highlight=function(t){t?i.ChangeColor(this.highlightColor,this.node):i.ChangeColor(this.defaultColor,this.node)},n.getAllTileCount=function(){return this.attachedCluster.reduce((function(t,e){return t+e.tileCount}),0)},o}(l))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/InputProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,o,r,i,a,c,s,u,l,h,p;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){i=n.cclegacy,a=n._decorator,c=n.Camera,s=n.geometry,u=n.input,l=n.Input,h=n.PhysicsSystem,p=n.Component}],execute:function(){var T,d,v,y,f;i._RF.push({},"8e1a0VpabNCnJ9W7RMADA79","InputProvider",void 0);var m=a.ccclass,C=a.property;n("InputProvider",(T=m("InputProvider"),d=C(c),T((f=t((y=function(n){function t(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i))||this,o(t,"cameraCom",f,r(t)),t.onTouchStart=null,t.onTouchMove=null,t.onTouchEnd=null,t._ray=new s.Ray,t}e(t,n);var i=t.prototype;return i.onLoad=function(){u.on(l.EventType.TOUCH_START,this.handleTouchStart,this),u.on(l.EventType.TOUCH_MOVE,this.handleTouchMove,this),u.on(l.EventType.TOUCH_END,this.handleTouchEnd,this),this.cameraCom||console.error("Camera component is not assigned in InputProvider.")},i.onDestroy=function(){u.off(l.EventType.TOUCH_START,this.handleTouchStart,this),u.off(l.EventType.TOUCH_MOVE,this.handleTouchMove,this),u.off(l.EventType.TOUCH_END,this.handleTouchEnd,this)},i.handleTouchStart=function(n){var t;null==(t=this.onTouchStart)||t.call(this,n)},i.handleTouchMove=function(n){var t;null==(t=this.onTouchMove)||t.call(this,n)},i.handleTouchEnd=function(n){var t;null==(t=this.onTouchEnd)||t.call(this,n)},i.performRaycast=function(n){if(!this.cameraCom)return console.error("Camera component not assigned in InputProvider"),null;if(this.cameraCom.screenPointToRay(n.x,n.y,this._ray),h.instance.raycast(this._ray)){var t=h.instance.raycastResults;if(t.length>0)return t[0].collider.node}return null},t}(p)).prototype,"cameraCom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/level.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,l;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,l=e.Component}],execute:function(){var o;r._RF.push({},"ff990/aKEdN27DtwgERvv2f","level",void 0);var c=n.ccclass;e("Level",c("Level")(o=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).levelData={level_1:{matrix:[[1,0,1,0,1],[0,1,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[1,0,0,0,1]]}},t}return t(r,e),r.prototype.getLevelMatrix=function(e){var t=this.levelData[e];return t?t.matrix:(console.error("Level "+e+" not found"),null)},r}(l))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridManager.ts","./level.ts"],(function(e){"use strict";var r,n,t,a,i,l,o,c,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,o=e.Component},function(e){c=e.GridManager},function(e){s=e.Level}],execute:function(){var u,v,g,p,d;i._RF.push({},"f8055cWfd1J3YumOJBvwbOV","LevelManager",void 0);var f=l.ccclass,L=l.property;e("LevelManager",(u=f("LevelManager"),v=L(c),u((d=r((p=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r=e.call.apply(e,[this].concat(i))||this,t(r,"gridManager",d,a(r)),r.level=new s,r}n(r,e);var i=r.prototype;return i.onLoad=function(){this.loadLevel("level_1")},i.loadLevel=function(e){var r=this.level.getLevelMatrix(e);r?this.gridManager.setGrid(r):console.error("Level "+e+" not found in level data")},r}(o)).prototype,"gridManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=p))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./level.ts","./BodyGroups.ts","./ColorProvider.ts","./GridGenerator.ts","./NeighborChecker.ts","./TileCluster.ts","./AreaBackground.ts","./GroundTile.ts","./Tile.ts","./CollisionHandler.ts","./TilePlacementHandler.ts","./TileSelectionHandler.ts","./TileTransferHandler.ts","./TileAnimator.ts","./InputProvider.ts","./GameManager.ts","./GridManager.ts","./LevelManager.ts","./SelectableManager.ts","./test.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NeighborChecker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,o;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,o=e._decorator}],execute:function(){var n;t._RF.push({},"bb245R1IldJi7kQQ0fjMLOS","NeighborChecker",void 0);var i=o.ccclass;o.property,e("NeighborChecker",i("NeighborChecker")(n=function(){function e(){}var t=e.prototype;return t.findNeighbors=function(e,r){for(var t=[],o=r.gridPosition,n=o.row,i=o.col,l=0,u=[{dRow:-1,dCol:0},{dRow:1,dCol:0},{dRow:0,dCol:-1},{dRow:0,dCol:1}];l<u.length;l++){var c=u[l],s=n+c.dRow,d=i+c.dCol,a=this.getGroundTile(e,s,d);a&&t.push(a)}return t},t.findFirstMatch=function(e,t){for(var o,n=this.findNeighbors(e,t),i=r(n);!(o=i()).done;){var l,u,c=o.value;if((null==(l=c.lastAttachedCluster)?void 0:l.type)===(null==(u=t.lastAttachedCluster)?void 0:u.type))return c.lastAttachedCluster}return null},t.getGroundTile=function(e,r,t){return e[r]&&e[r][t]?e[r][t]:null},e}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/SelectableManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileCluster.ts"],(function(e){"use strict";var t,r,l,i,n,s,a,c,o,u,f,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,l=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,a=e.Prefab,c=e.Node,o=e.Vec3,u=e.instantiate,f=e.tween,p=e.Component},function(e){b=e.TileCluster}],execute:function(){var h,C,g,d,y,v,S,P;n._RF.push({},"57701WxVB1At5p9WMflyLji","SelectableManager",void 0);var m=s.ccclass,A=s.property;e("SelectableManager",(h=m("SelectableManager"),C=A(a),g=A(c),h((v=t((y=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,l(t,"tileClusterPrefab",v,i(t)),l(t,"selectableArea",S,i(t)),l(t,"clusterCount",P,i(t)),t.clusters=[],t}r(t,e);var n=t.prototype;return n.onLoad=function(){this.createSelectableClusters()},n.createSelectableClusters=function(){for(var e=this.clusters.length,t=this.clusterCount-e,r=1.5*-(this.clusterCount-1),l=0;l<t;l++){var i=new o(r+3*(e+l),0,0),n=u(this.tileClusterPrefab);n.parent=this.selectableArea,n.setPosition(i.clone().add3f(10,0,0));var s=n.getComponent(b);s&&(s.initCluster(1,3),s.originalPosition=i.clone(),s.isSelectable=!0,this.clusters.push(s),f(n).to(.5,{position:i}).start())}},n.removeCluster=function(e){var t=this.clusters.indexOf(e);-1!==t&&(this.clusters.splice(t,1),e.node.destroy(),this.checkAndRefillClusters())},n.checkAndRefillClusters=function(){this.clusters.length<this.clusterCount&&this.createSelectableClusters()},t}(p)).prototype,"tileClusterPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"selectableArea",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(y.prototype,"clusterCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),d=y))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,i,r,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.tween,r=t.Vec3,s=t.Collider,c=t.Component}],execute:function(){var u;n._RF.push({},"8c091C75ypOvazE3hAi1j/K","test",void 0);var p=o.ccclass;o.property,t("test",p("test")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){this.moveRight(),this.setupTriggerListener()},o.moveRight=function(){i(this.node).to(3,{position:new r(5,this.node.position.y,this.node.position.z)}).start()},o.setupTriggerListener=function(){var t=this.node.getComponent(s);t&&t.on("onTriggerEnter",this.onTriggerEnter,this)},o.onTriggerEnter=function(t){console.log("Collision detected with:",t.otherCollider.node.name)},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorProvider.ts"],(function(e){"use strict";var t,r,o,i,n,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,c=e.Component},function(e){s=e.ColorProvider}],execute:function(){var a,u,p;n._RF.push({},"00639mmxnRFFrUeB00Dt1F/","Tile",void 0);var h=l.ccclass,y=l.property;e("Tile",h("Tile")((p=t((u=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,o(t,"type",p,i(t)),t.color=null,t}return r(t,e),t.prototype.init=function(e){this.type=e,this.color=s.getInstance().getColor(this.type),s.ChangeColor(this.color,this.node)},t}(c)).prototype,"type",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),a=u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/TileAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,o,r,i;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){o=n.cclegacy,r=n.tween,i=n.Vec3}],execute:function(){o._RF.push({},"4c760Qqh69H3p8hfypnYsgd","TileAnimator",void 0);n("TileAnimator",function(){function n(){}return n.animateToPositionWithRotation=function(){var n=t(e().mark((function n(t,o,i,c){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===c&&(c=.5),n.abrupt("return",new Promise((function(n){r(t).parallel(r().to(c,{position:o}),r().to(c,{rotation:i})).call(n).start()})));case 2:case"end":return n.stop()}}),n)})));return function(t,e,o,r){return n.apply(this,arguments)}}(),n.liftAndMoveToPosition=function(){var n=t(e().mark((function n(t,o,c,a){var u,s;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===a&&(a=.2),u=t.position.clone(),s=new i(u.x,u.y+o,u.z),n.next=5,new Promise((function(n){r(t).to(a/2,{position:s}).call((function(){r(t).to(a/2,{position:c}).call(n).start()})).start()}));case 5:case"end":return n.stop()}}),n)})));return function(t,e,o,r){return n.apply(this,arguments)}}(),n.animateClusterTransfer=function(){var n=t(e().mark((function n(t,o){var i;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.node.position.clone(),(i=o.node.position.clone()).y+=.2*(o.getAllTileCount()+Math.floor(t.getTiles().length/2)),i.y+=.05,n.next=6,new Promise((function(n){r(t.node).to(.125,{position:i}).call((function(){n()})).start()}));case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/TileCluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts"],(function(t){"use strict";var i,e,n,o,s,r,l,a,u,c,f,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,l=t.Prefab,a=t.Vec3,u=t.instantiate,c=t.tween,f=t.Component},function(t){h=t.Tile}],execute:function(){var p,g,d,P,b,y;s._RF.push({},"4b732WM0WRC/IiWikVPbpKP","TileCluster",void 0);var v=r.ccclass,T=r.property;t("TileCluster",(p=v("TileCluster"),g=T({type:l}),p((b=i((P=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,n(i,"tilePrefab",b,o(i)),n(i,"tileCount",y,o(i)),i.tiles=[],i.touchOffset=new a,i.type=null,i.isSelectable=!0,i.isDragging=!1,i.originalPosition=new a,i.lastGroundTile=null,i}e(i,t);var s=i.prototype;return s.onLoad=function(){this.originalPosition=this.node.getPosition().clone()},s.initCluster=function(t,i){this.type=t,this.createTiles(i)},s.createTiles=function(t){for(var i=0;i<t;i++){var e=u(this.tilePrefab);e.parent=this.node,e.setPosition(new a(0,.2*i,.01*-i));var n=e.getComponent(h);n&&n.init(this.type),this.tiles.push(n)}},s.getTiles=function(){return this.tiles},s.select=function(t){this.isSelectable&&(this.isDragging=!0,this.touchOffset=this.node.getWorldPosition().subtract(t))},s.move=function(t){if(this.isDragging){var i=t.add(this.touchOffset);i.y+=.2,this.node.setWorldPosition(i)}},s.deselect=function(){this.isDragging&&(this.isDragging=!1,this.resetPosition())},s.resetPosition=function(){c(this.node).to(.3,{position:this.originalPosition}).start()},i}(f)).prototype,"tilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(P.prototype,"tileCount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=P))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/TilePlacementHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,r,o,a,i;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e._decorator,i=e.Component}],execute:function(){var u;o._RF.push({},"1e150QBfjhPH6aezsWhPuVZ","TilePlacementHandler",void 0);var s=a.ccclass;a.property,e("TilePlacementHandler",s("TilePlacementHandler")(u=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.place=function(){var e=t(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.lastGroundTile)&&n){e.next=3;break}return e.abrupt("return",!1);case 3:return t.getAllTileCount(),n.node.removeFromParent(),n.node.setParent(t.node.parent),n.node.setPosition(t.node.position.x,.2,t.node.position.z),t.addTileCluster(n),n.lastGroundTile=t,e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),o}(i))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/TileSelectionHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileCluster.ts","./InputProvider.ts"],(function(e){"use strict";var t,i,n,r,o,l,s,c,u,a,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.EventTarget,c=e.Vec3,u=e.geometry,a=e.Component},function(e){d=e.TileCluster},function(e){h=e.InputProvider}],execute:function(){var p,v,f,T,y,P;o._RF.push({},"d9f70bidhFMHIWkLB7n6IRS","TileSelectionHandler",void 0);var m=l.ccclass,g=l.property;e("TileSelectionHandler",(p=m("TileSelectionHandler"),v=g(h),p(((P=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,n(t,"inputProvider",y,r(t)),t.selectedCluster=null,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.inputProvider?(this.inputProvider.onTouchStart=this.handleTouchStart.bind(this),this.inputProvider.onTouchMove=this.handleTouchMove.bind(this),this.inputProvider.onTouchEnd=this.handleTouchEnd.bind(this)):console.error("InputProvider is not assigned in TileSelectionHandler.")},o.onTileSelected=function(e,t){},o.handleTouchStart=function(e){var t=e.getLocation(),i=new c(t.x,t.y,0),n=this.performRaycast(i);if(n){var r=this.getTileClusterFromNode(n);if(r&&r.isSelectable){var o=this.getTouchWorldPosition(e);r.select(o),this.selectedCluster=r}}},o.handleTouchMove=function(e){if(this.selectedCluster){var t=this.getTouchWorldPosition(e);this.selectedCluster.move(t)}},o.handleTouchEnd=function(e){this.selectedCluster&&(this.selectedCluster.lastGroundTile?t.placementEvent.emit("placement",this.selectedCluster):this.selectedCluster.deselect(),this.selectedCluster=null)},o.getTileClusterFromNode=function(e){for(var t=e;t;){var i=t.getComponent(d);if(i)return i;t=t.parent}return null},o.performRaycast=function(e){return this.inputProvider?this.inputProvider.performRaycast(e):null},o.getTouchWorldPosition=function(e){var t=this.inputProvider.cameraCom,i=e.getLocation(),n=new u.Ray;t.screenPointToRay(i.x,i.y,n);var r=(0-n.o.y)/n.d.y;return new c(n.o.x+n.d.x*r,0,n.o.z+n.d.z*r)},t}(a)).placementEvent=new s,y=t((T=P).prototype,"inputProvider",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=T))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TileTransferHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileAnimator.ts"],(function(e){"use strict";var r,n,t,a,s;return{setters:[function(e){r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){t=e.cclegacy,a=e._decorator},function(e){s=e.TileAnimator}],execute:function(){var c;t._RF.push({},"ac40f5hYx9DH6uLhRzgjGuy","TileTransferHandler",void 0);var u=a.ccclass;e("TileTransferHandler",u("TileTransferHandler")(c=function(){function e(){}return e.prototype.transferClusterToTarget=function(){var e=r(n().mark((function e(r,t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.isSelectable=!1,e.next=3,s.animateClusterTransfer(r,t);case 3:
//! todo bir önceki ground boşaldıysa onu tekrar yerleştirebilir hale getirmeliyiz.
t.addTileCluster(r);case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),e}())||c);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});